<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free Nepal Income Tax Calculator. Calculate your tax liability for latest fiscal years 2082/83 and 2081/82. Accurate, easy-to-use tax estimation tool.">
    <meta name="keywords" content="nepal tax calculator, income tax nepal, tax calculation, tax slabs nepal, tax deduction nepal, latest tax nepal">
    <meta name="author" content="Tax Expert Nepal">
    <title>Nepal Income Tax Calculator | Free Tax Estimation Tool</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="canonical" href="https://tikasah84.com.np/nepal-tax-calculator">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-bg: #f8f9fa;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --success-color: #28a745;
        }
        
        body {
            background-color: #f0f4f8;
            color: #333;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding-bottom: 60px;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary-color), #1a2a3a);
            color: white;
            padding: 2rem 0;
            border-radius: 0 0 20px 20px;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(30deg);
        }
        
        .calculator-icon {
            font-size: 1.5rem;
            margin-right: 10px;
            color: var(--secondary-color);
        }
        
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin-bottom: 20px;
            background-color: white;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .card-header {
            background: linear-gradient(to right, var(--primary-color), #34495e);
            color: white;
            border-bottom: none;
            padding: 1.2rem 1.5rem;
            border-radius: 15px 15px 0 0 !important;
            font-weight: 600;
            font-size: 1.2rem;
        }
        
        .section-title {
            color: var(--primary-color);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 8px;
            margin-top: 1.5rem;
            margin-bottom: 1.2rem;
            font-size: 1.1rem;
            position: relative;
        }
        
        .section-title::after {
            content: "";
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 60px;
            height: 2px;
            background-color: var(--accent-color);
        }
        
        .result-card .card-header {
            background: linear-gradient(to right, #27ae60, #2ecc71);
            color: white;
        }
        
        .result-value {
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--primary-color);
            margin-bottom: 0;
        }
        
        .tax-breakdown {
            font-size: 0.95rem;
        }
        
        .tax-breakdown th {
            background-color: var(--primary-color);
            color: white;
        }
        
        .deduction-item {
            margin-bottom: 15px;
            padding: 12px;
            background-color: var(--light-bg);
            border-radius: 10px;
            border-left: 3px solid var(--secondary-color);
            transition: all 0.3s ease;
        }
        
        .deduction-item:hover {
            background-color: #e3f2fd;
            transform: translateX(5px);
        }
        
        .print-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
        }
        
        .footer {
            text-align: center;
            padding: 20px 0;
            color: #6c757d;
            font-size: 0.9rem;
            margin-top: 40px;
            border-top: 1px solid #eaeaea;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 4px solid var(--secondary-color);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .exemption-badge {
            background-color: var(--success-color);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.85rem;
            margin-left: 10px;
        }
        
        .slab-highlight {
            background-color: #fff8e1;
        }
        
        .slab-highlight td {
            font-weight: 600;
        }
        
        .tax-summary {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .progress-container {
            height: 12px;
            background-color: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, #4facfe, #00f2fe);
        }
        
        /* New SEO content styling */
        .seo-section {
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            margin-top: 30px;
        }
        
        .seo-title {
            color: var(--primary-color);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
            margin-bottom: 20px;
            position: relative;
        }
        
        .seo-title::after {
            content: "";
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 80px;
            height: 3px;
            background-color: var(--accent-color);
        }
        
        .benefit-card {
            border-left: 4px solid var(--secondary-color);
            padding: 15px;
            margin-bottom: 15px;
            background-color: var(--light-bg);
            border-radius: 0 8px 8px 0;
        }
        
        .faq-item {
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }
        
        .faq-question {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .feature-icon {
            font-size: 1.8rem;
            color: var(--secondary-color);
            margin-bottom: 15px;
        }
        
        .content-block {
            margin-bottom: 30px;
        }
        
        .cta-box {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin: 30px 0;
        }
        
        @media (max-width: 768px) {
            .card {
                margin-bottom: 15px;
            }
            
            .header {
                padding: 1.5rem 0;
            }
            
            .seo-section {
                padding: 20px 15px;
            }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(52, 152, 219, 0); }
            100% { box-shadow: 0 0 0 0 rgba(52, 152, 219, 0); }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1><i class="fas fa-calculator me-3"></i>Nepal Income Tax Calculator</h1>
                    <p class="lead">Calculate your monthly and annual income tax based on Nepal's latest tax slabs</p>
                </div>
                <div class="col-md-4 text-md-end">
                    <div class="bg-white text-dark d-inline-block p-3 rounded shadow-sm pulse">
                        <h5 class="mb-1">Current Fiscal Year</h5>
                        <p class="h4 mb-0" id="current-year-display">2082/83</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container py-4">
        <div class="highlight-box">
            <h5><i class="fas fa-info-circle me-2"></i>About This Calculator</h5>
            <p class="mb-0">This calculator helps you determine your income tax liability based on Nepal's progressive tax system. Enter your details on the left and see real-time results on the right. All calculations are performed in your browser - no data is sent to any server.</p>
        </div>
        
        <div class="row printContent">
            <!-- Left Column: Calculator Form -->
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header d-flex align-items-center">
                        <i class="fas fa-edit calculator-icon"></i>
                        <span>Tax Information</span>
                    </div>
                    <div class="card-body">
                        <form id="taxForm" autocomplete="off">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">Nature of Employee</label>
                                    <select class="form-select" name="marital_status" id="marital_status" required>
                                        <option value="single">Unmarried</option>
                                        <option value="married">Married</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Fiscal Year</label>
                                    <select class="form-select" name="fiscal_year" id="fiscal_year" required>
                                        <!-- Options will be populated by JavaScript -->
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Monthly Salary (NPR)</label>
                                    <div class="input-group">
                                        <span class="input-group-text">Rs.</span>
                                        <input type="number" min="0" class="form-control" name="monthly_salary" id="monthly_salary" step="0.01" placeholder="0.00" required value="0">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">No. of Months</label>
                                    <input type="number" min="1" class="form-control" name="months" id="months" value="12" required>
                                </div>
                                <div class="col-12">
                                    <label class="form-label">Bonus (NPR)</label>
                                    <div class="input-group">
                                        <span class="input-group-text">Rs.</span>
                                        <input type="number" min="0" class="form-control" name="bonus" id="bonus" value="0" step="0.01" placeholder="0.00">
                                    </div>
                                </div>
                                
                                <div class="col-12 mt-4">
                                    <h5 class="section-title">Annual Deductions</h5>
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <div class="deduction-item">
                                                <label class="form-label">Social Security Fund (SSF)</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">Rs.</span>
                                                    <input type="number" min="0" class="form-control" name="ssf" id="ssf" value="0" step="0.01" placeholder="0.00">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="deduction-item">
                                                <label class="form-label">Employees Provident Fund (EPF)</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">Rs.</span>
                                                    <input type="number" min="0" class="form-control" name="epf" id="epf" value="0" step="0.01" placeholder="0.00">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="deduction-item">
                                                <label class="form-label">Citizen Investment Trust (CIT)</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">Rs.</span>
                                                    <input type="number" min="0" class="form-control" name="cit" id="cit" value="0" step="0.01" placeholder="0.00">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="deduction-item">
                                                <label class="form-label">Insurance Premium</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">Rs.</span>
                                                    <input type="number" min="0" class="form-control" name="insurance" id="insurance" value="0" step="0.01" placeholder="0.00">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="deduction-item">
                                                <label class="form-label">Medical Insurance</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">Rs.</span>
                                                    <input type="number" min="0" class="form-control" name="medical" id="medical" value="0" step="0.01" placeholder="0.00">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 mt-4">
                                    <button type="submit" class="btn btn-primary btn-lg w-100">
                                        <i class="fas fa-calculator me-2"></i>Calculate Tax
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Right Column: Results -->
            <div class="col-lg-6">
                <div id="resultsArea">
                    <div class="card result-card">
                        <div class="card-header d-flex align-items-center">
                            <i class="fas fa-chart-bar calculator-icon"></i>
                            <span>Calculation Results</span>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-info text-center mb-0">
                                <i class="fas fa-lightbulb me-2"></i>Enter your salary and deduction details to see your tax calculation results
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header d-flex align-items-center">
                        <i class="fas fa-file-invoice calculator-icon"></i>
                        <span>Current Tax Slabs</span>
                    </div>
                    <div class="card-body">
                        <div class="row" id="taxSlabsInfo">
                            <!-- Tax slabs will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

          <!-- SEO Content Section -->
        <div class="seo-section">
            <h2 class="seo-title">Nepal Income Tax Guide for FY 2082/83</h2>
            
            <div class="content-block">
                <h3><i class="fas fa-file-alt me-2"></i>Understanding Nepal's Income Tax System</h3>
                <p>Nepal's income tax system operates on a progressive tax structure where higher income brackets are taxed at higher rates. The fiscal year 2082/83 (2025/26) has introduced minor changes to tax slabs and deduction limits. Our Nepal tax calculator incorporates all these changes to provide accurate estimates for both salaried individuals and self-employed professionals.</p>
                
                <p>The key components of Nepal's tax system include:</p>
                <ul>
                    <li><strong>Progressive Tax Slabs:</strong> Different income levels are taxed at different rates</li>
                    <li><strong>Deductions:</strong> EPF, CIT, SSF contributions reduce taxable income</li>
                    <li><strong>Exemptions:</strong> Certain allowances and benefits are tax-free</li>
                    <li><strong>Tax Credits:</strong> Specific investments qualify for tax credits</li>
                </ul>
            </div>
            
            <div class="content-block">
                <h3><i class="fas fa-percentage me-2"></i>Key Deductions in Nepal's Tax System</h3>
                <p>Understanding tax deductions is crucial for minimizing your tax liability. Here are the key deductions available in Nepal:</p>
                
                <div class="row">
                    <div class="col-md-4 mb-4">
                        <div class="benefit-card">
                            <h4><i class="fas fa-landmark me-2"></i>SSF (Social Security Fund)</h4>
                            <p class="mb-0">Contributions to SSF are deductible up to certain limits. Both employer and employee contributions qualify for deduction.</p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="benefit-card">
                            <h4><i class="fas fa-piggy-bank me-2"></i>EPF (Employees Provident Fund)</h4>
                            <p class="mb-0">Your EPF contributions are deductible from taxable income. The deduction limit for FY 2082/83 is Rs. 500,000 or 1/3rd of your income, whichever is lower.</p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="benefit-card">
                            <h4><i class="fas fa-hand-holding-usd me-2"></i>CIT (Citizen Investment Trust)</h4>
                            <p class="mb-0">CIT investments qualify for tax deductions. Combined with EPF and SSF, the maximum deduction is Rs. 500,000 for FY 2082/83.</p>
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-info">
                    <p><i class="fas fa-lightbulb me-2"></i>Our Nepal tax calculator automatically applies all eligible deductions to give you the most accurate tax estimate. Simply enter your contribution amounts in the calculator.</p>
                </div>
            </div>
            
            <div class="content-block">
                <h3><i class="fas fa-chart-line me-2"></i>Benefits of Using Our Nepal Tax Calculator</h3>
                
                <div class="row text-center mt-4">
                    <div class="col-md-3 mb-4">
                        <div class="feature-icon">
                            <i class="fas fa-bolt fa-2x"></i>
                        </div>
                        <h5>Instant Calculations</h5>
                        <p>Get real-time tax estimates as you enter your income details</p>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="feature-icon">
                            <i class="fas fa-lock fa-2x"></i>
                        </div>
                        <h5>Privacy Focused</h5>
                        <p>Your data never leaves your browser - complete privacy</p>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="feature-icon">
                            <i class="fas fa-file-invoice-dollar fa-2x"></i>
                        </div>
                        <h5>Tax Slab Updates</h5>
                        <p>Always updated with latest Nepal tax slabs and rates</p>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="feature-icon">
                            <i class="fas fa-mobile-alt fa-2x"></i>
                        </div>
                        <h5>Mobile Friendly</h5>
                        <p>Works perfectly on all devices - desktop, tablet & mobile</p>
                    </div>
                </div>
            </div>
            
            <div class="cta-box">
                <h3 class="mb-3">Plan Your Taxes with Confidence</h3>
                <p class="lead mb-4">Use our Nepal tax calculator to understand your tax liability, plan deductions, and maximize your take-home income</p>
                <a href="#taxForm" class="btn btn-light btn-lg">
                    <i class="fas fa-calculator me-2"></i>Calculate Your Tax Now
                </a>
            </div>
            
            <div class="content-block">
                <h3><i class="fas fa-question-circle me-2"></i>Frequently Asked Questions</h3>
                
                <div class="faq-item">
                    <div class="faq-question">Q: How is income tax calculated in Nepal?</div>
                    <p>A: Nepal uses a progressive tax system with different tax slabs. Income is taxed at increasing rates as it moves into higher brackets. Our calculator automatically applies the correct rates based on your income level and marital status.</p>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">Q: What is the CIT exemption limit for FY 2082/83?</div>
                    <p>A: For the fiscal year 2082/83, the combined deduction limit for EPF, CIT, and SSF is Rs. 500,000 or 1/3rd of your total income, whichever is lower.</p>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">Q: Are there different tax slabs for married and unmarried individuals?</div>
                    <p>A: Yes, Nepal has different tax slabs for married and unmarried individuals. Married taxpayers enjoy slightly higher tax-free thresholds and slab limits.</p>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">Q: How much medical insurance premium is deductible?</div>
                    <p>A: For FY 2082/83, you can deduct up to Rs. 20,000 for medical insurance premiums paid for yourself and your family members.</p>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">Q: Is bonus income taxable in Nepal?</div>
                    <p>A: Yes, bonus income is fully taxable and should be included in your total annual income when calculating taxes. Our calculator has a separate field for bonus income to ensure accurate calculations.</p>
                </div>
            </div>
            
            <div class="content-block">
                <h3><i class="fas fa-balance-scale me-2"></i>Recent Changes in Nepal Tax Laws</h3>
                <p>The fiscal year 2082/83 has seen several important updates to Nepal's tax regulations:</p>
                
                <ul>
                    <li>Increased deduction limit for EPF/CIT/SSF from Rs. 300,000 to Rs. 500,000</li>
                    <li>New tax compliance requirements for digital transactions</li>
                    <li>Revised tax slabs for high-income earners</li>
                    <li>Enhanced tax incentives for investments in specific sectors</li>
                    <li>Simplified tax filing procedures for salaried individuals</li>
                </ul>
                
                <p>Our Nepal tax calculator incorporates all these changes to ensure you get the most accurate estimate for your tax liability.</p>
            </div>
        </div>
    </div>
    
    <button id="printBtn" class="btn btn-primary print-btn" title="Print Results">
        <i class="fas fa-print"></i>
    </button>
    
    <div class="footer">
        <div class="container">
            <p>This calculator is for informational purposes only. While we strive for accuracy, we cannot guarantee the correctness of calculations. Please consult with a tax professional for official tax advice.</p>
            <p class="mb-0">Â© <span id="year"></span> Nepal Income Tax Calculator</p>
        </div>
    </div>

    <script>
        // Updated tax slabs data structure
        const taxSlabs = {
            "2082/83": {
                "single": {
                    "slabs": [
                        {"upto": 500000, "rate": 0.01},
                        {"upto": 700000, "rate": 0.10},
                        {"upto": 1000000, "rate": 0.20},
                        {"upto": 2000000, "rate": 0.30},
                        {"upto": 5000000, "rate": 0.36},
                        {"upto": null, "rate": 0.39}
                    ],
                    "exemption": 0
                },
                "married": {
                    "slabs": [
                        {"upto": 600000, "rate": 0.01},
                        {"upto": 800000, "rate": 0.10},
                        {"upto": 1100000, "rate": 0.20},
                        {"upto": 2100000, "rate": 0.30},
                        {"upto": 5100000, "rate": 0.36},
                        {"upto": null, "rate": 0.39}
                    ],
                    "exemption": 0
                },
                "deductions": {
                    "epf_cit_ssf_max": 500000,
                    "epf_cit_ssf_fraction": 0.3333,
                    "insurance_max": 40000,
                    "medical_max": 20000
                }
            },
            "2081/82": {
                "single": {
                    "slabs": [
                        {"upto": 500000, "rate": 0.01},
                        {"upto": 700000, "rate": 0.10},
                        {"upto": 1000000, "rate": 0.20},
                        {"upto": 2000000, "rate": 0.30},
                        {"upto": 5000000, "rate": 0.36},
                        {"upto": null, "rate": 0.39}
                    ],
                    "exemption": 0
                },
                "married": {
                    "slabs": [
                        {"upto": 600000, "rate": 0.01},
                        {"upto": 800000, "rate": 0.10},
                        {"upto": 1100000, "rate": 0.20},
                        {"upto": 2100000, "rate": 0.30},
                        {"upto": 5100000, "rate": 0.36},
                        {"upto": null, "rate": 0.39}
                    ],
                    "exemption": 0
                },
                "deductions": {
                    "epf_cit_ssf_max": 300000,
                    "epf_cit_ssf_fraction": 0.3333,
                    "insurance_max": 40000,
                    "medical_max": 20000
                }
            }
        };

        // Fiscal years available
        const fiscalYears = [
            { id: "2082/83", display: "2082/83" },
            { id: "2081/82", display: "2081/82" }
        ];

        // DOM Elements
        const fiscalYearSelect = document.getElementById('fiscal_year');
        const currentYearDisplay = document.getElementById('current-year-display');
        const taxForm = document.getElementById('taxForm');
        const resultsArea = document.getElementById('resultsArea');
        const printBtn = document.getElementById('printBtn');
        const taxSlabsInfo = document.getElementById('taxSlabsInfo');

        // Initialize the application
        function init() {
            // Populate fiscal year dropdown
            fiscalYears.forEach(year => {
                const option = document.createElement('option');
                option.value = year.id;
                option.textContent = year.display;
                if (year.id === "2082/83") option.selected = true;
                fiscalYearSelect.appendChild(option);
            });
            
            // Set current year display
            currentYearDisplay.textContent = fiscalYears[0].display;
            
            // Display tax slabs for the current year
            displayTaxSlabs('2082/83');
            
            // Add event listeners
            fiscalYearSelect.addEventListener('change', function() {
                const selectedYear = this.value;
                currentYearDisplay.textContent = selectedYear;
                displayTaxSlabs(selectedYear);
                calculateTax();
            });
            
            taxForm.addEventListener('submit', function(e) {
                e.preventDefault();
                calculateTax();
            });
            
            // Add input event listeners to form fields
            const inputFields = taxForm.querySelectorAll('input, select');
            inputFields.forEach(field => {
                field.addEventListener('input', calculateTax);
            });
            
            printBtn.addEventListener('click', function() {
                window.print();
            });
            
            // Initial calculation
            calculateTax();
        }

        // Display tax slabs for the selected year
        function displayTaxSlabs(year) {
            const slabData = taxSlabs[year];
            
            // Clear existing content
            taxSlabsInfo.innerHTML = '';
            
            // Create slabs display for both single and married
            const slabDisplay = `
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-header bg-primary text-white">
                        <i class="fas fa-user me-2"></i>For Unmarried Individuals
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="table-light">
                                    <tr>
                                        <th>Income Slab (NPR)</th>
                                        <th>Tax Rate</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${slabData.single.slabs.map((slab, index) => {
                                        let slabRange;
                                        if (index === 0) {
                                            slabRange = `Up to ${slab.upto.toLocaleString()}`;
                                        } else if (slab.upto === null) {
                                            slabRange = `Above ${slabData.single.slabs[index-1].upto.toLocaleString()}`;
                                        } else {
                                            slabRange = `${(slabData.single.slabs[index-1].upto + 1).toLocaleString()} - ${slab.upto.toLocaleString()}`;
                                        }
                                        
                                        return `<tr${index === slabData.single.slabs.length - 1 ? ' class="table-warning"' : ''}>
                                            <td>${slabRange}</td>
                                            <td>${(slab.rate * 100).toFixed(0)}%</td>
                                        </tr>`;
                                    }).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-header bg-success text-white">
                        <i class="fas fa-users me-2"></i>For Married Individuals
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="table-light">
                                    <tr>
                                        <th>Income Slab (NPR)</th>
                                        <th>Tax Rate</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${slabData.married.slabs.map((slab, index) => {
                                        let slabRange;
                                        if (index === 0) {
                                            slabRange = `Up to ${slab.upto.toLocaleString()}`;
                                        } else if (slab.upto === null) {
                                            slabRange = `Above ${slabData.married.slabs[index-1].upto.toLocaleString()}`;
                                        } else {
                                            slabRange = `${(slabData.married.slabs[index-1].upto + 1).toLocaleString()} - ${slab.upto.toLocaleString()}`;
                                        }
                                        
                                        return `<tr${index === slabData.married.slabs.length - 1 ? ' class="table-warning"' : ''}>
                                            <td>${slabRange}</td>
                                            <td>${(slab.rate * 100).toFixed(0)}%</td>
                                        </tr>`;
                                    }).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 mt-4">
                <div class="card">
                    <div class="card-header bg-info text-white">
                        <i class="fas fa-percent me-2"></i>Deduction Limits
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <div class="bg-light p-3 rounded text-center">
                                    <p class="mb-1">EPF/CIT/SSF</p>
                                    <p class="fw-bold">Rs. ${slabData.deductions.epf_cit_ssf_max.toLocaleString()}</p>
                                    <small>${(slabData.deductions.epf_cit_ssf_fraction * 100).toFixed(2)}% of income</small>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="bg-light p-3 rounded text-center">
                                    <p class="mb-1">Insurance Premium</p>
                                    <p class="fw-bold">Rs. ${slabData.deductions.insurance_max.toLocaleString()}</p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="bg-light p-3 rounded text-center">
                                    <p class="mb-1">Medical Insurance</p>
                                    <p class="fw-bold">Rs. ${slabData.deductions.medical_max.toLocaleString()}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            `;
            
            taxSlabsInfo.innerHTML = slabDisplay;
        }

        // Calculate deductions
        function calcDeductions(slab, totalIncome, epf, cit, ssf, insurance, medical) {
            const epf_cit_ssf = epf + cit + ssf;
            const epf_cit_ssf_max = Math.min(
                slab.deductions.epf_cit_ssf_max,
                totalIncome * slab.deductions.epf_cit_ssf_fraction
            );
            const eligible_epf_cit_ssf = Math.min(epf_cit_ssf, epf_cit_ssf_max);
            const eligible_insurance = Math.min(insurance, slab.deductions.insurance_max);
            const eligible_medical = Math.min(medical, slab.deductions.medical_max);
            
            return {
                epf_cit_ssf: eligible_epf_cit_ssf,
                insurance: eligible_insurance,
                medical: eligible_medical,
                total_deduction: eligible_epf_cit_ssf + eligible_insurance + eligible_medical
            };
        }

        // Calculate tax
        function calculateTax() {
            try {
                // Get form values
                const marital_status = document.getElementById('marital_status').value;
                const fiscal_year = document.getElementById('fiscal_year').value;
                const monthly_salary = parseFloat(document.getElementById('monthly_salary').value) || 0;
                const months = parseInt(document.getElementById('months').value) || 12;
                const bonus = parseFloat(document.getElementById('bonus').value) || 0;
                const epf = parseFloat(document.getElementById('epf').value) || 0;
                const cit = parseFloat(document.getElementById('cit').value) || 0;
                const ssf = parseFloat(document.getElementById('ssf').value) || 0;
                const insurance = parseFloat(document.getElementById('insurance').value) || 0;
                const medical = parseFloat(document.getElementById('medical').value) || 0;
                
                // Calculate total income
                const total_income = monthly_salary * months + bonus;
                
                // Get tax slab data
                const slab = taxSlabs[fiscal_year];
                const status_key = marital_status;
                const slabs = slab[status_key].slabs;
                const exemption = slab[status_key].exemption;
                
                // Calculate deductions
                const deductions = calcDeductions(
                    slab, total_income, epf, cit, ssf, insurance, medical
                );
                
                // Calculate taxable income (including exemption)
                const taxable_income = Math.max(0, total_income - deductions.total_deduction - exemption);
                
                // Calculate tax based on slabs
                let last_limit = 0;
                let remaining = taxable_income;
                let total_tax = 0;
                const breakdown = [];
                
                for (const slab_def of slabs) {
                    const limit = slab_def.upto;
                    const rate = slab_def.rate;
                    
                    let income_in_slab;
                    if (limit === null) {
                        income_in_slab = remaining;
                    } else {
                        income_in_slab = Math.min(remaining, limit - last_limit);
                    }
                    
                    if (income_in_slab <= 0) {
                        last_limit = limit;
                        continue;
                    }
                    
                    const slab_tax = income_in_slab * rate;
                    breakdown.push({
                        income_from: last_limit + 1,
                        income_to: limit || taxable_income,
                        rate: rate,
                        income_in_slab: income_in_slab,
                        tax: slab_tax
                    });
                    
                    total_tax += slab_tax;
                    remaining -= income_in_slab;
                    last_limit = limit || last_limit;
                    
                    if (remaining <= 0) {
                        break;
                    }
                }
                
                const monthly_tax = total_tax / 12;
                
                // Prepare result object
                const result = {
                    deductions: deductions,
                    exemption: exemption,
                    taxable_income: taxable_income,
                    annual_tax: total_tax,
                    monthly_tax: monthly_tax,
                    breakdown: breakdown,
                    total_income: total_income
                };
                
                // Display results
                displayResults(result);
                
            } catch (error) {
                // Display error message
                resultsArea.innerHTML = `
                    <div class="card result-card">
                        <div class="card-header d-flex align-items-center">
                            <i class="fas fa-exclamation-triangle calculator-icon"></i>
                            <span>Calculation Error</span>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-danger">
                                <p>An error occurred during calculation:</p>
                                <p class="mb-0">${error.message}</p>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        // Display results in the UI
        function displayResults(result) {
            // Calculate tax percentage
            const taxPercentage = (result.annual_tax / result.total_income) * 100 || 0;
            
            resultsArea.innerHTML = `
                <div class="card result-card">
                    <div class="card-header d-flex align-items-center">
                        <i class="fas fa-chart-bar calculator-icon"></i>
                        <span>Calculation Results</span>
                    </div>
                    <div class="card-body">
                        <div class="tax-summary">
                            <div class="row">
                                <div class="col-md-6">
                                    <p class="mb-1">Total Income</p>
                                    <h3 class="text-primary">Rs. ${result.total_income.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}</h3>
                                </div>
                                <div class="col-md-6">
                                    <p class="mb-1">Annual Tax</p>
                                    <h3 class="text-success">Rs. ${result.annual_tax.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}</h3>
                                </div>
                            </div>
                            <div class="progress-container mt-3">
                                <div class="progress-bar" style="width: ${taxPercentage > 39 ? 39 : taxPercentage/39 * 100}%">
                                </div>
                                
                            </div>
                            <div class="position-relative mt-1" style="height: 20px;">
                                <small 
                                  class="position-absolute" 
                                  style="left: ${taxPercentage > 39 ? 100 : (taxPercentage / 39) * 100}%; transform: translateX(-50%);">
                                  ${taxPercentage.toFixed(1)}%
                                </small>
                                <small class="position-absolute end-0">39%</small>
                              </div>
                              
                        </div>
                        
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <div class="bg-light p-3 rounded text-center">
                                    <p class="mb-1">Total Deductions</p>
                                    <p class="result-value">Rs. ${result.deductions.total_deduction.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="bg-light p-3 rounded text-center">
                                    <p class="mb-1">Exemption</p>
                                    <p class="result-value">Rs. ${result.exemption.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="bg-light p-3 rounded text-center">
                                    <p class="mb-1">Taxable Income</p>
                                    <p class="result-value">Rs. ${result.taxable_income.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="bg-primary text-white p-3 rounded text-center">
                                    <p class="mb-1">Monthly Tax</p>
                                    <p class="h4">Rs. ${result.monthly_tax.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}</p>
                                </div>
                            </div>
                        </div>
                        
                        <h5 class="section-title">Deductions Breakdown</h5>
                        <div class="table-responsive mb-4">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Deduction Type</th>
                                        <th>Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>EPF/CIT/SSF</td>
                                        <td>Rs. ${result.deductions.epf_cit_ssf.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}</td>
                                    </tr>
                                    <tr>
                                        <td>Insurance Premium</td>
                                        <td>Rs. ${result.deductions.insurance.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}</td>
                                    </tr>
                                    <tr>
                                        <td>Medical Insurance</td>
                                        <td>Rs. ${result.deductions.medical.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}</td>
                                    </tr>
                                    <tr class="table-active fw-bold">
                                        <td>Total Deduction</td>
                                        <td>Rs. ${result.deductions.total_deduction.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <h5 class="section-title">Tax Breakdown</h5>
                        <div class="table-responsive">
                            <table class="table table-hover tax-breakdown">
                                <thead>
                                    <tr>
                                        <th>Slab Range</th>
                                        <th>Income in Slab</th>
                                        <th>Rate</th>
                                        <th>Tax Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${result.breakdown.map((slab, index) => `
                                        <tr${index === result.breakdown.length - 1 ? ' class="slab-highlight"' : ''}>
                                            <td>${slab.income_from.toLocaleString()} - ${slab.income_to ? slab.income_to.toLocaleString() : "â"}</td>
                                            <td>Rs. ${slab.income_in_slab.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}</td>
                                            <td>${(slab.rate*100).toFixed(0)}%</td>
                                            <td>Rs. ${slab.tax.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}</td>
                                        </tr>
                                    `).join("")}
                                    <tr class="table-active fw-bold">
                                        <td colspan="3">Total Tax</td>
                                        <td>Rs. ${result.annual_tax.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `;
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
    <script>
        document.getElementById("year").textContent = new Date().getFullYear();
      </script>
      
</body>
</html>